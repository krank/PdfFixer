{
  "$schema": "https://json-schema.org/draft-07/schema",
  "type": "object",
  "properties": {
    "configName": {
      "description": "The name of the configuration",
      "type": "string"
    },
    "inputFileName": {
      "description": "The PDF file to read from; must be a valid PDF file.",
      "type": "string"
    },
    "outputFileName": {
      "description": "The main PDF file to write changes to; must be different from inputFileName",
      "type": "string"
    },
    "actions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "action": {
            "description": "The action to be taken"
          }
        },
        "required": [
          "action"
        ],
        "oneOf": [
          {
            "additionalProperties": false,
            "properties": {
              "action": {
                "const": "setMetadata"
              },
              "title": {
                "description": "The new title",
                "type": "string"
              },
              "author": {
                "description": "The new author",
                "type": "string"
              },
              "description": {
                "description": "The new description",
                "type": "string"
              },
              "keywords": {
                "description": "The new keywords",
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string"
                }
              }
            },
            "anyOf": [
              {
                "required": [
                  "title"
                ]
              },
              {
                "required": [
                  "author"
                ]
              },
              {
                "required": [
                  "description"
                ]
              },
              {
                "required": [
                  "keywords"
                ]
              }
            ]
          },
          {
            "additionalProperties": false,
            "properties": {
              "action": {
                "const": "removeLayers"
              },
              "layerNames": {
                "description": "The layers to remove",
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string"
                }
              }
            },
            "required": [
              "layerNames"
            ]
          },
          {
            "additionalProperties": false,
            "properties": {
              "action": {
                "const": "deletePage"
              },
              "pageNumber": {
                "description": "The page to delete",
                "type": "integer",
                "minimum": 1
              }
            },
            "required": [
              "pageNumber"
            ]
          },
          {
            "additionalProperties": false,
            "properties": {
              "action": {
                "const": "addBlankPage"
              },
              "beforePage": {
                "type": "integer",
                "minimum": 1
              }
            },
            "required": [
              "beforePage"
            ]
          },
          {
            "unevaluatedProperties": false,
            "properties": {
              "action": {
                "const": "insertPagesFrom"
              },
              "beforePage": {
                "description": "Where in the PDF to add the new pages",
                "type": "integer",
                "minimum": 1
              },
              "sourceFile": {
                "description": "The PDF to get pages from",
                "type": "string",
                "minLength": 4
              }
            },
            "required": [
              "beforePage",
              "sourceFile"
            ],
            "oneOf": [
              {
                "properties": {
                  "sourcePage": {
                    "description": "The page number to get from sourceFile (1-based)",
                    "type": "integer",
                    "minimum": 1
                  }
                },
                "required": [
                  "sourcePage"
                ]
              },
              {
                "properties": {
                  "sourcePageFirst": {
                    "description": "The first page to get from sourceFile (1-based)",
                    "type": "integer",
                    "minimum": 1
                  },
                  "sourcePageLast": {
                    "description": "The last page to get from sourceFile (1-based)",
                    "type": "integer",
                    "minimum": 1
                  }
                },
                "required": [
                  "sourcePageFirst",
                  "sourcePageLast"
                ]
              }
            ]
          },
          {
            "additionalProperties": false,
            "properties": {
              "action": {
                "const": "renameLayerLabel"
              },
              "from": {
                "description": "Current name. If empty or missing, will rename first label encountered",
                "type": "string"
              },
              "to": {
                "description": "New name",
                "type": "string"
              }
            },
            "required": [
              "from"
            ]
          }
        ]
      }
    }
  },
  "required": [
    "configName",
    "inputFileName",
    "outputFileName",
    "actions"
  ]
}